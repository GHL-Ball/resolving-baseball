(window.webpackJsonp=window.webpackJsonp||[]).push([[474],{2965:function(t,o,e){"use strict";e.d(o,"a",(function(){return m})),e.d(o,"b",(function(){return v}));var d=e(59),r=e.n(d),n=e(317),l=e.n(n),c=e(114),f=e.n(c),m=()=>(new Date).getFullYear(),v=(t,pattern)=>{var o=r()(t);return l()(o)?f()(o,pattern):""}},2968:function(t,o,e){"use strict";var d=e(1),r=e(2965),n=d.a.extend({props:{datetime:{type:String,required:!0},format:{type:String,default:"YYYY年M月D日 HH:mm",required:!1}},computed:{displayTime(){return Object(r.b)(this.datetime,this.format)}}}),l=e(7),component=Object(l.a)(n,(function(){var t=this,o=t.$createElement;return(t._self._c||o)("time",{attrs:{datetime:t.datetime}},[t._t("default"),t._v(t._s(t.displayTime))],2)}),[],!1,null,null,null);o.a=component.exports},4253:function(t,o,e){"use strict";e.d(o,"a",(function(){return n}));var d=e(34),r=e(23);const n=Object(r.a)((t=>`/v3/notes/${t}/latest_draft/diff`),(async(t,o,s,a)=>{const e=await t.get(o,a);return Object(d.a)(e.data.data,{callerName:"fetchNoteLatestDraftDiff"})}))},4684:function(t,o,e){var content=e(5742);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(16).default)("44e0b192",content,!0,{sourceMap:!1})},5741:function(t,o,e){"use strict";e(4684)},5742:function(t,o,e){var d=e(15)((function(i){return i[1]}));d.push([t.i,".o-draftNoteEditConfirmModal__body[data-v-02c0f217]{margin:24px}.o-draftNoteEditConfirmModal__text[data-v-02c0f217]{margin:32px 16px 24px;font-size:var(--font-size-lg);font-weight:600;text-align:center}@media only screen and (min-width:481px){.o-draftNoteEditConfirmModal__buttonContainer[data-v-02c0f217]{display:flex}}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]{box-sizing:border-box;display:flex;flex-flow:column;align-items:center;justify-content:space-between;padding:16px 0;text-align:center;cursor:pointer;background-color:initial;border:2px solid var(--color-border-default);border-radius:8px;transition:all .2s var(--easeInOutExpo)}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]:focus-within{outline-style:auto;outline-color:-webkit-focus-ring-color;outline-offset:2px}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]:hover,.o-draftNoteEditConfirmModal__editButton[data-active=true][data-v-02c0f217]{background-color:var(--color-background-secondary);border-color:var(--color-border-success)}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]:last-child{margin-top:16px}@media only screen and (min-width:481px){.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]{width:calc(100% - 8px)}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]:first-child{margin-right:8px}.o-draftNoteEditConfirmModal__editButton[data-v-02c0f217]:last-child{margin-top:0;margin-left:8px}}.o-draftNoteEditConfirmModal__editButton .label[data-v-02c0f217]{display:inline-block;padding:4px 8px;font-size:var(--font-size-xs);font-weight:600;line-height:1;color:var(--color-text-primary);border-radius:10px}.o-draftNoteEditConfirmModal__editButton .label[data-type=primary][data-v-02c0f217]{background-color:var(--color-green-200)}.o-draftNoteEditConfirmModal__editButton .label[data-type=secondary][data-v-02c0f217]{background-color:var(--color-surface-disabled)}.o-draftNoteEditConfirmModal__editButton .time[data-v-02c0f217]{display:inline-block;margin-top:8px;font-size:var(--font-size-base);font-weight:600}.o-draftNoteEditConfirmModal__editButton .count[data-v-02c0f217]{display:inline-block;margin-top:8px;font-size:var(--font-size-sm);color:var(--color-text-secondary)}.o-draftNoteEditConfirmModal__caution[data-v-02c0f217]{padding-top:16px;font-size:var(--font-size-xs);color:var(--color-text-caution)}.o-draftNoteEditConfirmModal__caution .icon[data-v-02c0f217]{vertical-align:middle}.o-draftNoteEditConfirmModal__footer[data-v-02c0f217]{display:flex;justify-content:flex-end;width:100%}.o-draftNoteEditConfirmModal__footer>button[data-v-02c0f217]:first-child{margin-right:16px}",""]),d.locals={},t.exports=d},6676:function(t,o,e){"use strict";e.r(o);var d=e(0),r=(e(14),e(1)),n=e(21),l=e.n(n),c=e(162),s={development:"http://localhost:3111",production:"https://editor.note.com",rc1:"https://editor.rc1.note.com",rc2:"https://editor.rc2.note.com",rc3:"https://editor.rc3.note.com",rc4:"https://editor.rc4.note.com",beta1:"https://editor.beta1.note.com",beta2:"https://editor.beta2.note.com",beta3:"https://editor.beta3.note.com",beta4:"https://editor.beta4.note.com",beta5:"https://editor.beta5.note.com",beta6:"https://editor.beta6.note.com",beta7:"https://editor.beta7.note.com",beta8:"https://editor.beta8.note.com",beta9:"https://editor.beta9.note.com",beta10:"https://editor.beta10.note.com"},p={origin:s,originType:"editor",path:(t,o,e)=>{var{noteKey:d,reedit:r}=t,n="/notes/".concat(d,"/edit");return!0===r&&(n+="?reedit=true"),o===e?n:o+n}},f=e(4253),m=e(396),v=e(54),_=e(35),h=e(138),C=e(82),y=e(43),x=e(73),N=e(2968),E=e(248),M=e(155),w=r.a.extend({components:{BasicModalContent:C.a,NtButton:y.a,NtLoadingDots:h.a,NtModal:x.a,NtSvgIcon:E.default,NtTime:N.a,ModalHeading:M.a},mixins:[v.a],data:()=>({selectedTarget:void 0,isLoading:!0,data:void 0}),computed:{note(){return this.$store.state.modal.draftNoteEditConfirmModal.note},show(){var t;return Boolean(null===(t=this.note)||void 0===t?void 0:t.noteDraft)}},methods:{handleBeforeOpen(){var t=this;return Object(d.a)((function*(){var o,e,d;t.data=void 0,t.isLoading=!0;try{t.data=yield f.a.call(l.a,[t.note.key]),t.isLoading=!1}catch(r){console.error(r),t.$store.dispatch(_.FLASH_MESSAGE_ACTION_TYPES.SHOW_FLASH,{isVisible:!0,text:"エラーが発生しました。".concat(null===(d=null===(e=null===(o=r.response)||void 0===o?void 0:o.data)||void 0===e?void 0:e.error)||void 0===d?void 0:d.message),type:"error"}),t.popModal()}}))()},handleEditButtonClick(){var t={notesEdit:p},o=Object(c.b)()(t)(Object(m.a)(this)).getLinkUrl("notesEdit",{noteKey:this.note.key,reedit:"published"===this.selectedTarget});/^http/.test(o)?window.location.href=o:this.$router.push(o)}}}),B=(e(5741),e(7)),component=Object(B.a)(w,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return t.show?e("nt-modal",{attrs:{name:"draftNoteEditConfirm"},on:{"before-open":t.handleBeforeOpen,"before-close":function(o){t.selectedTarget=void 0}}},[e("basic-modal-content",{staticClass:"o-draftNoteEditConfirmModal"},[t.isLoading?e("div",{staticClass:"o-draftNoteEditConfirmModal__body",attrs:{slot:"body"},slot:"body"},[e("nt-loading-dots")],1):void 0!==t.data?e("div",{staticClass:"o-draftNoteEditConfirmModal__body",attrs:{slot:"body"},slot:"body"},[e("modal-heading",{staticClass:"o-draftNoteEditConfirmModal__text"},[t._v("\n        公開されていない下書きがあります"),e("br"),t._v("どちらを編集しますか？\n      ")]),t._v(" "),e("div",{staticClass:"o-draftNoteEditConfirmModal__buttonContainer"},[e("label",{staticClass:"o-draftNoteEditConfirmModal__editButton",attrs:{type:"button","data-active":("published"===t.selectedTarget).toString(),for:"target-published"}},[e("span",{staticClass:"label",attrs:{"data-type":"secondary"}},[t._v("\n            公開した時点の記事\n          ")]),t._v(" "),e("nt-time",{staticClass:"time",attrs:{datetime:t.data.publishedNote.updatedAt}}),t._v(" "),e("span",{staticClass:"count"},[t._v(t._s(t.data.publishedNote.characterCount.toLocaleString("ja"))+"文字")]),t._v(" "),e("input",{staticClass:"visually-hidden",attrs:{id:"target-published",type:"radio",name:"target",value:"published"},on:{click:function(o){t.selectedTarget="published"}}})],1),t._v(" "),e("label",{staticClass:"o-draftNoteEditConfirmModal__editButton",attrs:{type:"button","data-active":("draft"===t.selectedTarget).toString(),for:"target-draft"}},[e("span",{staticClass:"label",attrs:{"data-type":"primary"}},[t._v("\n            最新の下書き\n          ")]),t._v(" "),e("nt-time",{staticClass:"time",attrs:{datetime:t.data.draftNote.updatedAt}}),t._v(" "),e("span",{staticClass:"count"},[t._v("\n            "+t._s(t.data.draftNote.characterCount.toLocaleString("ja"))+"文字\n          ")]),t._v(" "),e("input",{staticClass:"visually-hidden",attrs:{id:"target-draft",type:"radio",name:"target",value:"draft"},on:{click:function(o){t.selectedTarget="draft"}}})],1)]),t._v(" "),"published"===t.selectedTarget?e("p",{staticClass:"o-draftNoteEditConfirmModal__caution"},[e("nt-svg-icon",{staticClass:"icon",attrs:{type:"warning",size:"small"}}),t._v("\n        公開した時点の記事を選んだ場合、最新の下書きは消失します\n      ")],1):t._e()],1):t._e(),t._v(" "),e("div",{staticClass:"o-draftNoteEditConfirmModal__footer",attrs:{slot:"footer"},slot:"footer"},[e("nt-button",{attrs:{size:"small",type:"basic"},on:{click:function(o){return t.popModal()}}},[t._v("\n        キャンセル\n      ")]),t._v(" "),e("nt-button",{attrs:{size:"small",type:"primary",disabled:void 0===t.selectedTarget},on:{click:t.handleEditButtonClick}},[t._v("\n        編集する\n      ")])],1)])],1):t._e()}),[],!1,null,"02c0f217",null);o.default=component.exports}}]);