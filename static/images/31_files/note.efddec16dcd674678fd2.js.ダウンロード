(window.webpackJsonp=window.webpackJsonp||[]).push([[556],{4751:function(t,o,e){var content=e(5880);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(16).default)("338929d8",content,!0,{sourceMap:!1})},5879:function(t,o,e){"use strict";e(4751)},5880:function(t,o,e){var n=e(15)((function(i){return i[1]}));n.push([t.i,".o-r18ObjectionClaimModal__container[data-v-5f3357c4]{padding:40px}@media only screen and (max-width:480px){.o-r18ObjectionClaimModal__container[data-v-5f3357c4]{padding:24px}}.o-r18ObjectionClaimModal__textarea[data-v-5f3357c4]{margin-bottom:16px}.o-r18ObjectionClaimModal__notes[data-v-5f3357c4]{font-size:var(--font-size-xs);color:var(--color-text-secondary)}",""]),n.locals={},t.exports=n},6673:function(t,o,e){"use strict";e.r(o);var n=e(0),r=(e(18),e(1)),c=e(82),l=e(250),d=e(73),m=e(251),h=e(43),v=(e(11),e(12),e(284));var f=function(t,o){return Object(v.a)(t,o)},_=e(17);function y(){var t=_.q.get("claim-history")||"[]",o=[];try{o=JSON.parse(t)}catch(t){console.error(t)}return o}function C(t,o){return(o=null!=o?o:y()).find((o=>f(o,t)))}var object=e(71);function j(){return(j=Object(n.a)((function*(t,o){var e,n,r;try{yield t.post("/v2/objection_claims",{objection_claim:Object(object.c)(o)})}catch(t){console.error(t);var c=null===(r=null===(n=null===(e=t.response)||void 0===e?void 0:e.data)||void 0===n?void 0:n.data)||void 0===r?void 0:r.error;if(c)throw c}}))).apply(this,arguments)}var O=r.a.extend({components:{NtModal:d.a,BasicModalContent:c.a,FormTextarea:m.a,NtButton:h.a,ModalFooterButtonGroup:l.a},data:()=>({isLoading:!1,isSubmitted:!1,comment:"",commentHasErrored:!1,commentHasTouched:!1}),computed:{record(){var t;return{userId:null===(t=this.currentUser)||void 0===t?void 0:t.id,contentId:this.contentId,contentType:this.contentType,key:this.contentKey,claimType:"porn"}},submitCallback(){return this.$store.state.modal.objectionClaim.submitCallback},contentId(){return this.$store.state.modal.objectionClaim.contentId},contentType(){return this.$store.state.modal.objectionClaim.contentType},contentKey(){return this.$store.state.modal.objectionClaim.contentKey}},watch:{comment(){this.commentHasTouched=!0,this.validate()}},methods:{handleBeforeOpen(){var data={isLoading:!1,isSubmitted:!1,comment:"",commentHasErrored:!1,commentHasTouched:!1};Object.keys(data).forEach((t=>{this[t]=data[t]})),this.currentUser&&!C(this.record)||(this.isSubmitted=!0)},handleCancel(){this.$modal.pop()},handleClose(){this.$modal.pop(),this.submitCallback&&this.submitCallback()},validate(){this.comment?this.commentHasErrored=!1:this.commentHasErrored=!0},handleSubmit(){var t=this;return Object(n.a)((function*(){var o;if(t.validate(),(null===(o=t.currentUser)||void 0===o?void 0:o.id)&&!t.commentHasErrored){t.isLoading=!0;try{yield function(t,o){return j.apply(this,arguments)}(t.$axios,Object.assign(Object.assign({},t.record),{comment:t.comment})),function(t){var o=y();if(!C(t,o)){var e=[...o,t];_.q.set("claim-history",JSON.stringify(e))}}(t.record),t.isSubmitted=!0}catch(t){alert(t)}finally{t.isLoading=!1}}}))()}}}),x=O,k=(e(5879),e(7)),component=Object(k.a)(x,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("nt-modal",{staticClass:"o-r18ObjectionClaimModal",attrs:{"disable-backdrop":!0,name:"r18ObjectionClaim"},on:{"before-open":t.handleBeforeOpen}},[e("basic-modal-content",[e("div",{attrs:{slot:"header"},slot:"header"},[t.isSubmitted?e("span",[t._v("\n        申請を受理しました\n      ")]):e("span",[t._v("\n        18歳以上向けではない理由を教えてください\n      ")])]),t._v(" "),e("div",{staticClass:"o-r18ObjectionClaimModal__container",attrs:{slot:"body"},slot:"body"},[t.isSubmitted?[e("p",{staticClass:"o-r18ObjectionClaimModal__description"},[t._v("\n          お申し込みいただいた内容の調査には一週間程度お時間いただきます。個別の結果の判定はご連絡いたしません。\n        ")])]:[e("form-textarea",{staticClass:"o-r18ObjectionClaimModal__textarea",attrs:{id:"claim",label:"コメント",name:"claim",required:!0,"has-error":t.commentHasTouched&&t.commentHasErrored,placeholder:"理由を入力してください"},model:{value:t.comment,callback:function(o){t.comment=o},expression:"comment"}}),t._v(" "),e("p",{staticClass:"o-r18ObjectionClaimModal__notes"},[t._v("\n          ※申請された内容をもとに審査させていただきます。必ずしも解除されるわけではないことをご理解ください。\n        ")])]],2),t._v(" "),t.isSubmitted?e("div",{attrs:{slot:"footer"},slot:"footer"},[e("nt-button",{attrs:{type:"basic",size:"small",disabled:t.isLoading},on:{click:t.handleClose}},[t._v("\n        閉じる\n      ")])],1):e("modal-footer-button-group",{attrs:{slot:"footer"},slot:"footer",scopedSlots:t._u([{key:"default",fn:function(o){return[e("nt-button",{class:o.buttonClass,attrs:{type:"basic",size:"small",disabled:t.isLoading},on:{click:t.handleCancel}},[t._v("\n          キャンセル\n        ")]),t._v(" "),e("nt-button",{class:o.buttonClass,attrs:{type:"primary",size:"small",disabled:t.isLoading||!t.commentHasTouched||t.commentHasErrored},on:{click:t.handleSubmit}},[t._v("\n          送信\n        ")])]}}])})],1)],1)}),[],!1,null,"5f3357c4",null);o.default=component.exports}}]);