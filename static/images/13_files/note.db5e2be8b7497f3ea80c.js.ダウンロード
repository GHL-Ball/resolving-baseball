(window.webpackJsonp=window.webpackJsonp||[]).push([[466],{2867:function(t,e,o){var content=o(2892);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("d608d3e4",content,!0,{sourceMap:!1})},2887:function(t,e,o){"use strict";var n=o(43),l=o(33),d=o(248),c=o(377),r={components:{NtButton:n.a,NtIcon:l.default,NtSvgIcon:d.default,NtIconLabel:c.a},props:{buttonType:{type:String,default:void 0},iconType:{type:String,default:void 0},svgIconType:{type:String,default:void 0},labelText:{type:String,default:void 0},size:{type:String,default:void 0},buttonSize:{type:String,default:void 0},iconSize:{type:String,default:void 0},width:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},isCircular:{type:Boolean,default:!1}},computed:{computedButtonSize(){return this.buttonSize||this.size},computedIconSize(){return this.iconSize||this.size}}},_=(o(2891),o(7)),component=Object(_.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nt-button",{staticClass:"m-iconButton",class:{"m-iconButton--circular h-8 w-8 rounded-full p-0":t.isCircular},attrs:{type:t.buttonType,size:t.computedButtonSize,width:t.width,disabled:t.disabled}},[t.iconType||t.svgIconType?o("span",{class:{"m-iconButton__labelWithIcon":t.labelText}},[!1!==Boolean(t.labelText)||t.isCircular?t._e():o("nt-icon-label",{attrs:{type:t.iconType}}),t._v(" "),t.iconType?o("nt-icon",{attrs:{type:t.iconType,size:t.computedIconSize,clickable:!1}}):o("nt-svg-icon",{attrs:{type:t.svgIconType,size:t.computedIconSize,clickable:!1}})],1):t._e(),t._v(" "),t.labelText&&!t.isCircular?o("span",[t._v(t._s(t.labelText))]):t._e()])}),[],!1,null,"80ab2cbc",null);e.a=component.exports},2891:function(t,e,o){"use strict";o(2867)},2892:function(t,e,o){var n=o(15)((function(i){return i[1]}));n.push([t.i,".m-iconButton .m-iconButton__labelWithIcon[data-v-80ab2cbc]{margin-right:4px}.m-iconButton--circular[data-v-80ab2cbc]  .a-button__inner{line-height:0}",""]),n.locals={},t.exports=n},4719:function(t,e,o){var content=o(5816);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("70586caa",content,!0,{sourceMap:!1})},5815:function(t,e,o){"use strict";o(4719)},5816:function(t,e,o){var n=o(15)((function(i){return i[1]}));n.push([t.i,".o-sendNoteMailModal__soundMessage[data-v-d73bbd4e]{margin:24px 32px;text-align:center}.o-sendNoteMailModal__main[data-v-d73bbd4e]{padding:24px;margin:24px;background-color:var(--color-background-secondary);border:1px solid var(--color-border-default);border-radius:8px}@media only screen and (max-width:480px){.o-sendNoteMailModal__main[data-v-d73bbd4e]{padding:16px;margin:16px}}.o-sendNoteMailModal__helpSupport[data-v-d73bbd4e]{color:var(--color-text-clickable-icon)}@media only screen and (min-width:769px){.o-sendNoteMailModal__helpSupport[data-v-d73bbd4e]{transition:color .2s cubic-bezier(1,0,0,1)}.o-sendNoteMailModal__helpSupport[data-v-d73bbd4e]:hover{color:var(--color-text-secondary)}}.o-sendNoteMailModal__explain[data-v-d73bbd4e]{margin-bottom:16px;text-align:center}@media only screen and (max-width:480px){.o-sendNoteMailModal__explain[data-v-d73bbd4e]{font-size:var(--font-size-sm)}}.o-sendNoteMailModal__mailItem[data-v-d73bbd4e]{margin-bottom:16px}.o-sendNoteMailModal__mailItemBody[data-v-d73bbd4e]{display:flex;align-items:center}.o-sendNoteMailModal__close[data-v-d73bbd4e]{margin-left:8px;color:var(--color-text-clickable-icon)}@media only screen and (min-width:769px){.o-sendNoteMailModal__close[data-v-d73bbd4e]:hover{color:var(--color-text-secondary)}}.o-sendNoteMailModal__add[data-v-d73bbd4e]{display:flex;justify-content:center}.o-sendNoteMailModal__attention[data-v-d73bbd4e]{margin:32px 24px}@media only screen and (max-width:480px){.o-sendNoteMailModal__attention[data-v-d73bbd4e]{margin:16px}}.o-sendNoteMailModal__attentionTitle[data-v-d73bbd4e]{margin-bottom:16px;font-size:var(--font-size-base);font-weight:600;text-align:center}@media only screen and (max-width:480px){.o-sendNoteMailModal__attentionTitle[data-v-d73bbd4e]{margin-bottom:8px}}.o-sendNoteMailModal__attentionItem[data-v-d73bbd4e]{display:flex;align-content:center}.o-sendNoteMailModal__attentionItem+.o-sendNoteMailModal__attentionItem[data-v-d73bbd4e]{margin-top:8px}.o-sendNoteMailModal__attentionIcon[data-v-d73bbd4e]{flex:0 0 auto;margin-right:8px;color:var(--color-text-success)}.o-sendNoteMailModal__attentionIcon[data-icon=caution][data-v-d73bbd4e]{color:var(--color-text-caution)}.o-sendNoteMailModal__attentionText[data-v-d73bbd4e]{width:100%;font-size:var(--font-size-xs);font-weight:600;color:var(--color-text-secondary)}.o-sendNoteMailModal__image>img[data-v-d73bbd4e]{width:100%;height:auto}.o-sendNoteMailModal__addressList[data-v-d73bbd4e]{margin-bottom:16px}.o-sendNoteMailModal__addressListItem[data-v-d73bbd4e]{margin-bottom:4px;text-align:center}",""]),n.locals={},t.exports=n},6795:function(t,e,o){"use strict";o.r(e);var n=o(0),l=o(54),d=o(82),c=o(250),r=o(43),_=o(44),m=o(33),M=o(37),v=o(154),h=o(73),f=o(2887),y=o(106),x={components:{BasicModalContent:d.a,ModalFooterButtonGroup:c.a,IconButton:f.a,NtButton:r.a,NtLink:_.default,NtIcon:m.default,NtImage:M.default,NtInput:v.a,NtModal:h.a},mixins:[l.a],data:()=>({emails:[{email:""}],sending:!1,finishSending:!1,sendSuccessEmails:[]}),computed:{note(){return this.$store.state.modal.sendNoteMailModal.note},isSoundNote(){return"SoundNote"===this.note.type},show(){return this.note},buttonDisabled(){return this.emails.every((t=>!t.email))||this.sending},headerTitle(){return this.finishSending?"プレゼント完了":"プレゼントする"},showPlusButton(){return this.emails.length<10},modalText(){return"「".concat(Object(y.p)(Object(y.d)(this.note.name||this.note.body),30),"」をプレゼントします。<br>送付先のメールアドレスを入力してください。")}},methods:{submit(){var t=this;return Object(n.a)((function*(){try{t.sending=!0;var data=yield t.$axios.$post("/v2/notes/".concat(t.note.key,"/send_emails"),{emails:t.emails.map((t=>t.email))});t.sendSuccessEmails=data.data.emails,t.sending=!1,t.finishSending=!0}catch(e){alert(e.response.data.data),t.sending=!1}}))()},pushPlus(){this.emails.length>=10||this.sending||(this.emails.push({email:""}),this.emails.length>=10&&(this.showPlusButton=!1))},removeInput(t){this.emails.splice(t,1),this.emails.length<10&&(this.showPlusButton=!0)},init(){this.sending=!1,this.finishSending=!1,this.emails=[{email:""}]}}},N=(o(5815),o(7)),component=Object(N.a)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("nt-modal",{attrs:{name:"sendNoteMail","disable-backdrop":!0},on:{"before-open":function(e){return t.init()}}},[o("basic-modal-content",{staticClass:"o-sendNoteMailModal"},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      "+t._s(t.headerTitle)+"\n      "),t.finishSending?t._e():o("nt-link",{staticClass:"o-sendNoteMailModal__helpSupport",attrs:{href:"https://pieceofcake.zendesk.com/hc/ja/articles/360000654501","aria-label":"有料記事をプレゼントする",target:"_blank"}},[o("nt-icon",{attrs:{clickable:!1,type:"help"}})],1)],1),t._v(" "),t.isSoundNote?[o("div",{staticClass:"o-sendNoteMailModal__body",attrs:{slot:"body"},slot:"body"},[o("div",{staticClass:"o-sendNoteMailModal__soundMessage"},[t._v("\n          申し訳ありません。"),o("br"),t._v("\n          音声記事はプレゼントできません。\n        ")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("nt-button",{attrs:{size:"small",type:"basic"},on:{click:function(e){return t.popModal()}}},[t._v("\n          閉じる\n        ")])],1)]:[t.finishSending?o("div",{staticClass:"o-sendNoteMailModal__body",attrs:{slot:"body"},slot:"body"},[o("div",{staticClass:"o-sendNoteMailModal__image"},[o("nt-image",{attrs:{src:"~/assets/images/img_finish_send_email.png",lazy:!1,alt:""}})],1),t._v(" "),o("ul",{staticClass:"o-sendNoteMailModal__addressList"},t._l(t.sendSuccessEmails,(function(e,n){return o("li",{key:n,staticClass:"o-sendNoteMailModal__addressListItem"},[t._v("\n            "+t._s(e)+"\n          ")])})),0),t._v(" "),o("p",{staticClass:"o-sendNoteMailModal__explain"},[t._v("\n          プレゼントを送付しました！"),o("br"),t._v("\n          あなたの記事がより多くの人に"),o("br"),t._v("\n          届きますように。"),o("br")])]):o("div",{staticClass:"o-sendNoteMailModal__body",attrs:{slot:"body"},slot:"body"},[o("div",{staticClass:"o-sendNoteMailModal__main"},[o("p",{staticClass:"o-sendNoteMailModal__explain",domProps:{innerHTML:t._s(t.modalText)}}),t._v(" "),o("ul",{staticClass:"o-sendNoteMailModal__mail"},t._l(t.emails,(function(e,n){return o("li",{key:n,staticClass:"o-sendNoteMailModal__mailItem"},[o("div",{staticClass:"o-sendNoteMailModal__mailItemBody"},[o("nt-input",{attrs:{type:"email",placeholder:"mail@example.com",width:"fit"},model:{value:e.email,callback:function(o){t.$set(e,"email","string"==typeof o?o.trim():o)},expression:"value.email"}}),t._v(" "),n>0?o("nt-icon",{staticClass:"o-sendNoteMailModal__close",attrs:{type:"close",size:"medium"},nativeOn:{click:function(e){return t.removeInput(n)}}}):t._e()],1)])})),0),t._v(" "),o("div",{staticClass:"o-sendNoteMailModal__add"},[t.showPlusButton?o("icon-button",{class:!0,attrs:{"button-type":"secondary","icon-type":"add","icon-size":"small","button-size":"small","label-text":"送る人を増やす",width:"fit"},nativeOn:{click:function(e){return t.pushPlus()}}}):t._e()],1)]),t._v(" "),o("div",{staticClass:"o-sendNoteMailModal__attention"},[o("p",{staticClass:"o-sendNoteMailModal__attentionTitle"},[t._v("\n            プレゼントできること\n          ")]),t._v(" "),o("div",{staticClass:"o-sendNoteMailModal__attentionItem"},[o("nt-icon",{staticClass:"o-sendNoteMailModal__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),t._v(" "),o("p",{staticClass:"o-sendNoteMailModal__attentionText"},[t._v("\n              記事の内容をメールで全文送れます\n            ")])],1),t._v(" "),o("div",{staticClass:"o-sendNoteMailModal__attentionItem"},[o("nt-icon",{staticClass:"o-sendNoteMailModal__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),t._v(" "),o("p",{staticClass:"o-sendNoteMailModal__attentionText"},[t._v("\n              埋め込み、ファイルダウンロード機能などはリンクが表示されます\n            ")])],1),t._v(" "),o("div",{staticClass:"o-sendNoteMailModal__attentionItem"},[o("nt-icon",{staticClass:"o-sendNoteMailModal__attentionIcon",attrs:{clickable:!1,size:"small",type:"warning","data-icon":"caution"}}),t._v(" "),o("p",{staticClass:"o-sendNoteMailModal__attentionText"},[t._v("\n              マンガビューアー、目次機能は使えません\n            ")])],1)])]),t._v(" "),t.finishSending?o("div",{attrs:{slot:"footer"},slot:"footer"},[o("nt-button",{attrs:{size:"small",type:"basic"},on:{click:function(e){return t.popModal()}}},[t._v("\n          閉じる\n        ")])],1):o("modal-footer-button-group",{attrs:{slot:"footer"},slot:"footer",scopedSlots:t._u([{key:"default",fn:function(e){return[o("nt-button",{class:e.buttonClass,attrs:{size:"small",type:"basic",disabled:t.sending},on:{click:function(e){return t.popModal()}}},[t._v("\n            キャンセル\n          ")]),t._v(" "),o("nt-button",{class:e.buttonClass,attrs:{size:"small",type:"primary",disabled:t.buttonDisabled},on:{click:function(e){return t.submit()}}},[t._v("\n            送信する\n          ")])]}}],null,!1,2620619895)})]],2)],1):t._e()}),[],!1,null,"d73bbd4e",null);e.default=component.exports}}]);