(window.webpackJsonp=window.webpackJsonp||[]).push([[476],{4711:function(e,t,o){var content=o(5800);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("44d8a5f9",content,!0,{sourceMap:!1})},4712:function(e,t,o){var content=o(5802);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("097f3136",content,!0,{sourceMap:!1})},5799:function(e,t,o){"use strict";o(4711)},5800:function(e,t,o){var c=o(15)((function(i){return i[1]}));c.push([e.i,".m-AccountSelector__title[data-v-b2c18e7e]{margin-bottom:4px;font-size:var(--font-size-sm);font-weight:600}.m-AccountSelector__description[data-v-b2c18e7e]{margin-bottom:8px;font-size:var(--font-size-xs)}.m-AccountSelector__body[data-v-b2c18e7e]{position:relative;width:236px;margin-top:4px;margin-right:auto;margin-bottom:4px}.m-AccountSelector__selected[data-v-b2c18e7e]{display:flex;align-items:center;width:100%;padding:8px 4px 8px 12px;border:1px solid var(--color-border-default);border-radius:8px}@media only screen and (min-width:769px){.m-AccountSelector__selected[data-v-b2c18e7e]{transition:border-color .2s cubic-bezier(1,0,0,1)}.m-AccountSelector__selected[data-v-b2c18e7e]:hover{border-color:var(--color-border-strong)}}.m-AccountSelector__avatar[data-v-b2c18e7e]{display:block;flex-shrink:0;margin-right:8px}.m-AccountSelector__name[data-v-b2c18e7e]{display:block;overflow:hidden;font-size:var(--font-size-xs);font-weight:600;text-overflow:ellipsis;white-space:nowrap}.m-AccountSelector__dropdownIcon[data-v-b2c18e7e]{flex-shrink:0;justify-self:flex-end;margin-left:auto}.m-AccountSelector__items[data-v-b2c18e7e]{position:absolute;top:calc(100% - 3px);right:0;left:0;z-index:1;cursor:pointer;background-color:var(--color-surface-normal);border:1px solid var(--color-border-default);border-bottom-right-radius:5px;border-bottom-left-radius:5px}.m-AccountSelector__item[data-v-b2c18e7e]{display:flex;align-items:center;width:100%;padding:12px}.m-AccountSelector__item--selected[data-v-b2c18e7e]{pointer-events:none;opacity:.5}.m-AccountSelector__item[data-v-b2c18e7e]:hover{background-color:var(--color-background-secondary)}.m-AccountSelector__itemName[data-v-b2c18e7e]{overflow:hidden;font-size:var(--font-size-xs);font-weight:600;text-overflow:ellipsis;white-space:nowrap}",""]),c.locals={},e.exports=c},5801:function(e,t,o){"use strict";o(4712)},5802:function(e,t,o){var c=o(15)((function(i){return i[1]}));c.push([e.i,".o-moveAccount__body[data-v-8fa48350]{padding:24px}.o-moveAccount__item+.o-moveAccount__item[data-v-8fa48350]{margin-top:24px}.o-moveAccount__name[data-v-8fa48350]{margin-bottom:4px;font-size:var(--font-size-sm);font-weight:600}.o-moveAccount__title[data-v-8fa48350]{margin-bottom:8px;font-size:var(--font-size-sm)}",""]),c.locals={},e.exports=c},6631:function(e,t,o){"use strict";o.r(t);var c=o(0),n=(o(18),o(1)),l=o(54),r=o(73),d=o(155),m=o(43),v=o(82),_=o(250),f=o(192),h=o(33),A=n.a.extend({components:{Avatar:f.default,NtIcon:h.default},props:{accounts:{type:Array,default:()=>[]},label:{type:String,required:!0},description:{type:String,default:""},loginUser:{type:Object,default:()=>({})}},data:()=>({isOpen:!1,selectedAccount:null}),computed:{selectedImage(){var e,t,o;return null!==(o=(null===(e=this.selectedAccount)||void 0===e?void 0:e.userProfileImageUrl)||(null===(t=this.selectedAccount)||void 0===t?void 0:t.userProfileImagePath))&&void 0!==o?o:""},selectedName(){var e,t,o;return null!==(o=(null===(e=this.selectedAccount)||void 0===e?void 0:e.nickname)||(null===(t=this.selectedAccount)||void 0===t?void 0:t.name))&&void 0!==o?o:""},selectedUrlname(){var e,t;return null!==(t=null===(e=this.selectedAccount)||void 0===e?void 0:e.urlname)&&void 0!==t?t:""},isSelected(){return e=>e.urlname===this.selectedUrlname},isOtherAccountSelected(){var e=this.loginUser;return!(!e||null===e.urlname||""===this.selectedUrlname)&&e.urlname!==this.selectedUrlname}},mounted(){this.init()},methods:{init(){this.selectedAccount=this.accounts[0]},setIsOpen(e){this.isOpen=e},clickOutside(){this.setIsOpen(!1)},select(e){this.selectedAccount=e,this.emit()},emit(){this.$emit("change",this.selectedAccount)}}}),x=(o(5799),o(7)),S=Object(x.a)(A,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.accounts.length>0?o("div",{staticClass:"m-AccountSelector"},[o("h3",{staticClass:"m-AccountSelector__title",attrs:{id:"AccountSelectorLabel"}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),o("p",{staticClass:"m-AccountSelector__description"},[e._v("\n    "+e._s(e.description)+"\n  ")]),e._v(" "),o("div",{staticClass:"m-AccountSelector__body",attrs:{"aria-expanded":e.isOpen?"true":"false"}},[o("button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"m-AccountSelector__selected",on:{click:function(t){return e.setIsOpen(!e.isOpen)}}},[o("span",{staticClass:"m-AccountSelector__avatar"},[o("avatar",{attrs:{lazy:!1,src:e.selectedImage,size:"small",alt:""}})],1),e._v(" "),o("span",{staticClass:"m-AccountSelector__name"},[e._v("\n        "+e._s(e.selectedName)+"\n      ")]),e._v(" "),o("nt-icon",{staticClass:"m-AccountSelector__dropdownIcon",attrs:{clickable:!1,type:"arrowdropdown"}})],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"m-AccountSelector__items",attrs:{role:"listbox","aria-labelledby":"AccountSelectorLabel","aria-hidden":e.isOpen?"false":"true"}},e._l(e.accounts,(function(t){return o("button",{key:t.urlname,staticClass:"m-AccountSelector__item",class:[{"m-AccountSelector__item--selected":e.isSelected(t)}],attrs:{"aria-selected":e.isSelected(t),disabled:e.isSelected(t),tabindex:e.isSelected(t)?-1:0,role:"option"},on:{click:function(o){return e.select(t)}}},[o("span",{staticClass:"m-AccountSelector__avatar"},[o("avatar",{attrs:{src:t.userProfileImageUrl,size:"small",alt:""}})],1),e._v(" "),o("span",{staticClass:"m-AccountSelector__itemName"},[e._v("\n          "+e._s(t.name)+"\n        ")])])})),0)]),e._v(" "),e.isOtherAccountSelected?[o("div",{staticClass:"flex items-center mt-[8px] text-text-caution"},[o("nt-icon",{staticClass:"inline mr-[4px]",attrs:{type:"warning",size:"small",clickable:!1}}),e._v(" "),o("span",{staticClass:"text-xs font-bold"},[e._v("選択しているアカウントに記事が公開されます。")])],1)]:e._e()],2):e._e()}),[],!1,null,"b2c18e7e",null).exports,w=o(61),y=o(329);function k(){return(k=Object(c.a)((function*(e,t,o){return(yield e.post("/v3/members/owner_notes/".concat(t,"/move"),null,o)).data.data}))).apply(this,arguments)}var C=n.a.extend({components:{AccountSelector:S,BasicModalContent:v.a,ModalFooterButtonGroup:_.a,NtModal:r.a,NtButton:m.a,ModalHeading:d.a},mixins:[l.a],data:()=>({processing:!1,selectedAccount:null}),computed:Object.assign(Object.assign({},Object(w.c)({owners:y.OWNERS_GETTER_TYPES.GET_OWNERS_CAN_WRITE})),{note(){return this.$store.state.modal.moveAccountModal.note},title(){var e,t;return null===(t=null===(e=this.note)||void 0===e?void 0:e.noteDraft)||void 0===t?void 0:t.name},key(){var e;return null===(e=this.note)||void 0===e?void 0:e.key},moveUrlname(){var e;return null===(e=this.selectedAccount)||void 0===e?void 0:e.urlname},disableSubmit(){return this.processing}}),mounted(){this.selectedAccount=this.owners[0]},methods:{move(){var e=this;return Object(c.a)((function*(){e.disableSubmit||(e.processing=!0,yield function(e,t,o){return k.apply(this,arguments)}(e.$axios,e.key,{params:{urlname:e.moveUrlname}}),e.popModal(),e.processing=!1,window.location.reload())}))()},changeAccount(e){this.selectedAccount=e}}}),O=C,z=(o(5801),Object(x.a)(O,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nt-modal",{attrs:{name:"moveAccount"}},[o("basic-modal-content",{staticClass:"o-moveAccount"},[o("modal-heading",[e._v("記事を移動する")]),e._v(" "),o("div",{staticClass:"o-moveAccount__body",attrs:{slot:"body"},slot:"body"},[e.title?o("div",{staticClass:"o-moveAccount__item"},[o("h3",{staticClass:"o-moveAccount__name"},[e._v("\n          タイトル\n        ")]),e._v(" "),o("p",{staticClass:"o-moveAccount__title"},[e._v("\n          "+e._s(e.title)+"\n        ")])]):e._e(),e._v(" "),o("div",{staticClass:"o-moveAccount__item"},[o("account-selector",{attrs:{label:"移動先アカウント",description:"選んだアカウントにこの記事を移動します。",accounts:e.owners,"login-user":e.currentUser},on:{change:e.changeAccount}})],1)]),e._v(" "),o("modal-footer-button-group",{attrs:{slot:"footer"},slot:"footer",scopedSlots:e._u([{key:"default",fn:function(t){return[o("nt-button",{class:t.buttonClass,attrs:{type:"basic",size:"small"},on:{click:function(t){return e.popModal()}}},[e._v("\n          キャンセル\n        ")]),e._v(" "),o("nt-button",{class:t.buttonClass,attrs:{disabled:e.disableSubmit,size:"small",type:"primary"},on:{click:function(t){return e.move()}}},[e._v("\n          移動する\n        ")])]}}])})],1)],1)}),[],!1,null,"8fa48350",null));t.default=z.exports}}]);