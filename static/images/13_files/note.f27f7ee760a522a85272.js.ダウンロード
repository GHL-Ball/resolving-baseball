(window.webpackJsonp=window.webpackJsonp||[]).push([[587],{3617:function(e,t,n){"use strict";var l=n(1),r=n(43),o=n(377),c=n(33),m=l.a.extend({components:{NtButton:r.a,NtIcon:c.default,NtIconLabel:o.a},props:{membershipItem:{type:Object,required:!0},isWhole:{type:Boolean,default:!1}},data:()=>({isProcessing:!1}),computed:{imageUrl(){return this.membershipItem.headerImagePath},enableLockIcon(){return!this.membershipItem.isEveryoneVisible}},methods:{select(e){this.isProcessing||(this.isProcessing=!0,this.$emit("membership-selected",{membershipItem:e,callback:()=>{this.isProcessing=!1}}))}}}),d=n(7),h=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative flex py-[8px] px-[16px]"},[n("div",{staticClass:"flex flex-1 items-center"},[n("div",{staticClass:"`\n        relative w-[70px] sm:w-[80px] h-[40px] bg-surface-disabled bg-center bg-cover rounded-lg\n      `",style:{backgroundImage:e.imageUrl?"url("+e.imageUrl+")":void 0}},[e.enableLockIcon?n("div",{class:"\n          absolute top-[-5px] left-[-5px] w-[20px] h-[20px] p-[2px] bg-background-primary rounded-full\n        "},[n("nt-icon-label",{attrs:{type:"lock","aria-label":"非公開"}}),e._v(" "),n("nt-icon",{attrs:{clickable:!1,type:"lock",size:"small"}})],1):e._e()]),e._v(" "),n("p",{class:"\n      flex mx-[8px] sm:mx-[16px] font-bold text-text-primary break-all text-sm\n    "},[e._v("\n      "+e._s(e.isWhole?"メンバー全員に公開":e.membershipItem.name)+"\n    ")])]),e._v(" "),n("div",[e.membershipItem.isSelected?n("nt-button",{attrs:{disabled:e.isProcessing,size:"small",type:"secondary",width:"fit"},on:{click:function(t){return e.select(e.membershipItem)}}},[e._v("\n      追加済\n    ")]):n("nt-button",{attrs:{disabled:e.isProcessing,size:"small",type:"basic",width:"fit"},on:{click:function(t){return e.select(e.membershipItem)}}},[e._v("\n      追加\n    ")])],1)])}),[],!1,null,null,null).exports,v=n(44),x=l.a.extend({name:"MembershipList",components:{MembershipListItem:h,NtLink:v.default,NtIcon:c.default},props:{memberships:{type:Array,default:()=>[]},isShowTitle:{type:Boolean,default:!0},hasWholeMembership:{type:Boolean,default:!0}},computed:{membership(){return this.memberships[0].circle},membershipPlans(){return this.memberships[0].circlePlans}}}),_=Object(d.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isShowTitle?n("div",{staticClass:"sticky top-0 z-[2] flex align-center px-[16px] py-[8px] bg-background-secondary"},[n("p",{staticClass:"text-xs"},[e._v("\n      メンバーシップ\n    ")]),e._v(" "),n("nt-link",{staticClass:"leading-none text-text-clickable-icon md:hover:text-text-secondary ml-auto",attrs:{to:"https://www.help-note.com/hc/ja/articles/900000163906-%E3%82%B5%E3%83%BC%E3%82%AF%E3%83%AB%E3%81%A8%E3%81%AF",target:"_blank","aria-label":"ヘルプ"}},[n("nt-icon",{attrs:{clickable:!1,size:"small",type:"help"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"py-[8px]"},[e.hasWholeMembership?n("membership-list-item",{staticClass:"mb-[16px]",attrs:{"membership-item":e.membership,"is-whole":!0},on:{"membership-selected":function(t){return e.$emit("all-selected",t)}}}):e._e(),e._v(" "),n("p",{staticClass:"mb-[8px] ml-[16px] font-bold text-text-primary text-sm"},[e._v("\n      プラン限定公開\n    ")]),e._v(" "),e.membershipPlans.length>0?n("ul",e._l(e.membershipPlans,(function(t){return n("li",{key:t.key},[n("membership-list-item",{attrs:{"membership-item":t},on:{"membership-selected":function(t){return e.$emit("plan-selected",t)}}})],1)})),0):n("p",{staticClass:"text-sm ml-[16px]"},[e._v("\n      まだプランがありません\n    ")])],1)])}),[],!1,null,null,null);t.a=_.exports},4261:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var l=n(0),r=n(613),o=function(){var e=Object(l.a)((function*(e){var{vue:t,membershipItem:n,callback:l,note:o}=e;yield t.$store.dispatch(r.MEMBERSHIP_LIST_ACTION_TYPES.UPDATE_MEMBERSHIP,{membership:n,noteKey:o.key||""}),l()}));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)((function*(e){var{vue:t,membershipItem:n,callback:l,note:o}=e;yield t.$store.dispatch(r.MEMBERSHIP_LIST_ACTION_TYPES.UPDATE_MEMBERSHIP_PLAN,{membershipPlan:n,noteKey:o.key||""}),l()}));return function(t){return e.apply(this,arguments)}}()},6832:function(e,t,n){"use strict";n.r(t);var l=n(0),r=n(1),o=n(54),c=n(73),m=n(43),d=n(82),h=n(155),v=n(138),x=n(3617),_=n(613),f=n(4261),y=r.a.extend({components:{NtButton:m.a,BasicModalContent:d.a,ModalHeading:h.a,NtLoadingDots:v.a,NtModal:c.a,MembershipList:x.a},mixins:[o.a],data:()=>({isLoading:!0,magazines:[]}),computed:{memberships(){return this.$store.state.membershipList.membershipPermissions},note(){return this.$store.state.modal.membershipListModal.note},owner(){return this.$store.state.modal.membershipListModal.owner},isShowAttention(){if(null===this.note)return!1;var e="TextNote"===this.note.type,t=0===this.note.price,n=!this.note.isLimitedForReader;return e&&t&&n}},methods:{init(){var e=this;return Object(l.a)((function*(){yield e.$store.dispatch(_.MEMBERSHIP_LIST_ACTION_TYPES.CLEAR_MEMBERSHIP_PERMISSIONS),yield e.load()}))()},reset(){this.isLoading=!0},load(){var e=this;return Object(l.a)((function*(){e.owner?yield e.$store.dispatch(_.MEMBERSHIP_LIST_ACTION_TYPES.FETCH_OWNER_MEMBERSHIP_PERMISSIONS,{urlname:e.owner.urlname,noteKey:e.note.key||""}):yield e.$store.dispatch(_.MEMBERSHIP_LIST_ACTION_TYPES.FETCH_MEMBERSHIP_PERMISSIONS,e.note.key||""),e.isLoading=!1}))()},handleAllMembershipSelected(e){var t=this;return Object(l.a)((function*(){var{membershipItem:n,callback:l}=e;yield Object(f.a)({vue:t,membershipItem:n,callback:l,note:t.note})}))()},handleMembershipPlanSelected(e){var t=this;return Object(l.a)((function*(){var{membershipItem:n,callback:l}=e;yield Object(f.b)({vue:t,membershipItem:n,callback:l,note:t.note})}))()},close(){this.popModal()}}}),I=n(7),component=Object(I.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nt-modal",{attrs:{name:"membershipList","disable-backdrop":!0},on:{"before-open":function(t){return e.init()},"before-close":function(t){return e.reset()}}},[n("basic-modal-content",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}]},[n("modal-heading",{staticClass:"flex align-baseline justify-center",attrs:{slot:"header"},slot:"header"},[e._v("\n      メンバーシップに記事を追加・解除\n    ")]),e._v(" "),n("div",{attrs:{slot:"body"},slot:"body"},[n("div",{staticClass:"max-h-[400px] overflow-auto"},[e.isLoading?[n("nt-loading-dots",{staticClass:"h-[50px]"})]:[e.memberships.length>0?n("membership-list",{attrs:{memberships:e.memberships},on:{"all-selected":e.handleAllMembershipSelected,"plan-selected":e.handleMembershipPlanSelected}}):e._e()]],2),e._v(" "),e.isShowAttention?n("p",{staticClass:"m-4 text-xs text-text-secondary"},[e._v("\n        無料記事の全文はプランのメンバーだけが見れるようになります。試し読みエリアを設定する場合は記事を編集してください。\n      ")]):e._e()]),e._v(" "),n("nt-button",{attrs:{slot:"footer",size:"small",type:"basic"},on:{click:function(t){return e.close()}},slot:"footer"},[e._v("\n      閉じる\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);