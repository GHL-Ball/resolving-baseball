(window.webpackJsonp=window.webpackJsonp||[]).push([[203,166],{2860:function(e,t,n){"use strict";n.r(t);n(11),n(26),n(12);var o=n(1),r=n(54),l=o.a.extend({components:{DefaultView:()=>n.e(437).then(n.bind(null,6899)),HomeView:()=>n.e(440).then(n.bind(null,6900)),MagazineView:()=>n.e(443).then(n.bind(null,6901)),CircleView:()=>n.e(436).then(n.bind(null,6902)),CircleMemberView:()=>n.e(434).then(n.bind(null,6903)),CircleMembershipsView:()=>n.e(435).then(n.bind(null,6904)),LikesView:()=>n.e(442).then(n.bind(null,6905)),MyHomeView:()=>n.e(451).then(n.bind(null,6906)),MyMagazineView:()=>n.e(455).then(n.bind(null,6907)),MyCircleView:()=>n.e(448).then(n.bind(null,6908)),MyLikesView:()=>n.e(452).then(n.bind(null,6909)),StoreView:()=>n.e(464).then(n.bind(null,6910)),JobView:()=>n.e(441).then(n.bind(null,6911)),MyMagazineDetailView:()=>n.e(454).then(n.bind(null,6912)),MyPurchaseView:()=>n.e(460).then(n.bind(null,6913)),MyViewView:()=>n.e(462).then(n.bind(null,6914)),MyMagazineCouponView:()=>n.e(453).then(n.bind(null,6915)),MyMembershipView:()=>n.e(459).then(n.bind(null,6916)),MyFollowingsView:()=>n.e(450).then(n.bind(null,6917)),MyFollowersView:()=>n.e(449).then(n.bind(null,6918)),FollowingsView:()=>n.e(439).then(n.bind(null,6919)),FollowersView:()=>n.e(438).then(n.bind(null,6920)),MembershipNoteView:()=>n.e(447).then(n.bind(null,6921)),MyMembershipNoteView:()=>n.e(458).then(n.bind(null,6922)),MembershipMagazineView:()=>n.e(446).then(n.bind(null,6923)),MyMembershipMagazineView:()=>n.e(457).then(n.bind(null,6924)),MembershipHomeView:()=>n.e(445).then(n.bind(null,6925)),MembershipBoard:()=>n.e(444).then(n.bind(null,6926)),MyMembershipBoard:()=>n.e(456).then(n.bind(null,6927)),PaidNoteView:()=>n.e(463).then(n.bind(null,6928))},mixins:[r.a],props:{emptyType:{type:String,default:"default"},magazine:{type:Object,default:()=>Object.create(null)},creator:{type:Object,default:null}},methods:{onClickNewNote(e){var t;if(!(null===(t=this.currentUser)||void 0===t?void 0:t.emailConfirmedFlag))return e.preventDefault(),void this.pushRequestEmailConfirmModal()},onClickNewMagazine(){var e;(null===(e=this.currentUser)||void 0===e?void 0:e.emailConfirmedFlag)?this.$store.state.metadata.customDomain?window.location.href="".concat(this.$path.magazinesPath(),"/new"):this.$router.push("".concat(this.$path.magazinesPath(),"/new")):this.pushRequestEmailConfirmModal()},onClickNewMembership(e){var t;e.preventDefault();var n=!(null===(t=this.currentUser)||void 0===t?void 0:t.emailConfirmedFlag);this.$webview.isAndroidWebview&&!this.$webview.isAndroidVersionGteq(1,68,0)&&(n=!1),n?this.$webview.isAndroidWebview?window.location.href=this.$webview.needsMailActivation():this.pushRequestEmailConfirmModal():this.$router.push("/membership/settings/manage")}}}),d=n(7),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"home"===e.emptyType?n("home-view"):"paidNote"===e.emptyType?n("paid-note-view"):"myHome"===e.emptyType?n("my-home-view",{on:{click:e.onClickNewNote}}):"magazine"===e.emptyType?n("magazine-view"):"myMagazine"===e.emptyType?n("my-magazine-view",{on:{click:e.onClickNewMagazine}}):"circle"===e.emptyType?n("circle-view"):"circleMember"===e.emptyType?n("circle-member-view"):"circleMemberships"===e.emptyType?n("circle-memberships-view"):"myCircle"===e.emptyType?n("my-circle-view",{on:{click:e.onClickNewMembership}}):"like"===e.emptyType?n("likes-view"):"myLike"===e.emptyType?n("my-likes-view"):"store"===e.emptyType?n("store-view"):"job"===e.emptyType?n("job-view"):"myMagazineDetail"===e.emptyType?n("my-magazine-detail-view",{attrs:{magazine:e.magazine}}):"myPurchase"===e.emptyType?n("my-purchase-view"):"myView"===e.emptyType?n("my-view-view"):"myMagazineCoupon"===e.emptyType?n("my-magazine-coupon-view"):"myMembership"===e.emptyType?n("my-membership-view",{on:{click:e.onClickNewMembership}}):"myFollowings"===e.emptyType?n("my-followings-view"):"myFollowers"===e.emptyType?n("my-followers-view"):"followings"===e.emptyType?n("followings-view",{attrs:{creator:e.creator}}):"followers"===e.emptyType?n("followers-view",{attrs:{creator:e.creator}}):"membershipNote"===e.emptyType?n("membership-note-view"):"myMembershipNote"===e.emptyType?n("my-membership-note-view"):"membershipMagazine"===e.emptyType?n("membership-magazine-view"):"myMembershipMagazine"===e.emptyType?n("my-membership-magazine-view"):"membershipHome"===e.emptyType?n("membership-home-view"):"membershipBoard"===e.emptyType?n("membership-board"):"myMembershipBoard"===e.emptyType?n("my-membership-board"):n("default-view")}),[],!1,null,null,null);t.default=component.exports},2861:function(e,t,n){var content=n(2875);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("1b39ebf6",content,!0,{sourceMap:!1})},2862:function(e,t,n){"use strict";var o=n(1),r=n(17),l=o.a.extend({props:{scrollerRef:{type:String,default:void 0},distance:{type:Number,default:2e3}},data:()=>({loading:!1,nomore:!1,observer:null}),computed:{observerRoot(){if(this.scrollerRef&&this.$parent&&this.$parent.$refs[this.scrollerRef]){var e=this.$parent.$refs[this.scrollerRef];return null!=e?e:null}return null}},mounted(){this.$nextTick((()=>{this.setIntersectionObserver()}))},beforeDestroy(){this.removeIntersectionObserver()},methods:{setIntersectionObserver(){if(window.IntersectionObserver){var e={root:this.observerRoot,rootMargin:"".concat(this.distance,"px"),threshold:[0,.5,1]};this.observer=new IntersectionObserver(this.onIntersecting,e);var t=this.$refs.observer;t&&(this.detectIntersecting(t),this.observer.observe(t))}},removeIntersectionObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)},onIntersecting(e,t){e.forEach((e=>{if(e.isIntersecting&&!1===this.loading&&!1===this.nomore){this.emitInfinite();var t=this.$refs.observer;t&&this.detectIntersecting(t)}}))},detectIntersecting(e){var rect=Object(r.h)(e);if(rect){var{top:t}=rect;t-this.distance<=window.innerHeight&&!1===this.nomore&&(this.emitInfinite(),setTimeout((()=>{this.detectIntersecting(e)}),1e3))}},emitInfinite(){if(!this.loading){this.loading=!0;var e={loaded:()=>{this.loading=!1},complete:()=>{this.loading=!1,this.nomore=!0}};this.$emit("infinite",e)}}}}),d=(n(2874),n(7)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"observer",staticClass:"m-infiniteScroll"},[e.loading?e._t("loading"):!1===e.nomore&&!1===e.loading?n("div",{staticClass:"m-infiniteScroll__spacer"}):e._e()],2)}),[],!1,null,"8fa4540c",null);t.a=component.exports},2863:function(e,t,n){"use strict";var o,r=n(593),l=n(92),d=n(42),c=n(76),h=n(79),m=n(383),y=n(125),f=n(107),v=n(97).f,T=n(324),w=n(316),_=n(58),E=n(320),N=d.Int8Array,M=N&&N.prototype,C=d.Uint8ClampedArray,O=C&&C.prototype,A=N&&T(N),I=M&&T(M),S=Object.prototype,L=S.isPrototypeOf,D=_("toStringTag"),k=E("TYPED_ARRAY_TAG"),z=r&&!!w&&"Opera"!==m(d.opera),x=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R=function(e){return c(e)&&h(P,m(e))};for(o in P)d[o]||(z=!1);if((!z||"function"!=typeof A||A===Function.prototype)&&(A=function(){throw TypeError("Incorrect invocation")},z))for(o in P)d[o]&&w(d[o],A);if((!z||!I||I===S)&&(I=A.prototype,z))for(o in P)d[o]&&w(d[o].prototype,I);if(z&&T(O)!==I&&w(O,I),l&&!h(I,D))for(o in x=!0,v(I,D,{get:function(){return c(this)?this[k]:void 0}}),P)d[o]&&y(d[o],k,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:z,TYPED_ARRAY_TAG:x&&k,aTypedArray:function(e){if(R(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(w){if(L.call(A,e))return e}else for(var t in P)if(h(P,o)){var n=d[t];if(n&&(e===n||L.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(l){if(n)for(var o in P){var r=d[o];r&&h(r.prototype,e)&&delete r.prototype[e]}I[e]&&!n||f(I,e,n?t:z&&M[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var o,r;if(l){if(w){if(n)for(o in P)(r=d[o])&&h(r,e)&&delete r[e];if(A[e]&&!n)return;try{return f(A,e,n?t:z&&N[e]||t)}catch(e){}}for(o in P)!(r=d[o])||r[e]&&!n||f(r,e,t)}},isView:function(e){var t=m(e);return"DataView"===t||h(P,t)},isTypedArray:R,TypedArray:A,TypedArrayPrototype:I}},2874:function(e,t,n){"use strict";n(2861)},2875:function(e,t,n){var o=n(15)((function(i){return i[1]}));o.push([e.i,".m-infiniteScroll__spacer[data-v-8fa4540c]{height:1px}",""]),o.locals={},e.exports=o},2965:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y}));var o=n(59),r=n.n(o),l=n(317),d=n.n(l),c=n(114),h=n.n(c),m=()=>(new Date).getFullYear(),y=(e,pattern)=>{var t=r()(e);return d()(t)?h()(t,pattern):""}},2983:function(e,t,n){var o=n(3110);e.exports=function(e,t){var n=o(e);if(n%t)throw RangeError("Wrong offset");return n}},3108:function(e,t,n){"use strict";var o=n(20),r=n(42),l=n(92),d=n(3109),c=n(2863),h=n(390),m=n(195),y=n(233),f=n(125),v=n(62),T=n(594),w=n(2983),_=n(319),E=n(79),N=n(383),M=n(76),C=n(323),O=n(316),A=n(321).f,I=n(3111),S=n(592).forEach,L=n(322),D=n(97),k=n(232),z=n(116),x=n(389),P=z.get,R=z.set,$=D.f,Y=k.f,j=Math.round,U=r.RangeError,V=h.ArrayBuffer,F=h.DataView,B=c.NATIVE_ARRAY_BUFFER_VIEWS,W=c.TYPED_ARRAY_TAG,H=c.TypedArray,G=c.TypedArrayPrototype,K=c.aTypedArrayConstructor,J=c.isTypedArray,Z="BYTES_PER_ELEMENT",Q="Wrong length",X=function(e,t){for(var n=0,o=t.length,r=new(K(e))(o);o>n;)r[n]=t[n++];return r},ee=function(e,t){$(e,t,{get:function(){return P(this)[t]}})},te=function(e){var t;return e instanceof V||"ArrayBuffer"==(t=N(e))||"SharedArrayBuffer"==t},ne=function(e,t){return J(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},ie=function(e,t){return ne(e,t=_(t,!0))?y(2,e[t]):Y(e,t)},oe=function(e,t,n){return!(ne(e,t=_(t,!0))&&M(n)&&E(n,"value"))||E(n,"get")||E(n,"set")||n.configurable||E(n,"writable")&&!n.writable||E(n,"enumerable")&&!n.enumerable?$(e,t,n):(e[t]=n.value,e)};l?(B||(k.f=ie,D.f=oe,ee(G,"buffer"),ee(G,"byteOffset"),ee(G,"byteLength"),ee(G,"length")),o({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:ie,defineProperty:oe}),e.exports=function(e,t,n){var l=e.match(/\d+$/)[0]/8,c=e+(n?"Clamped":"")+"Array",h="get"+e,y="set"+e,_=r[c],E=_,N=E&&E.prototype,D={},k=function(e,t){$(e,t,{get:function(){return function(e,t){var data=P(e);return data.view[h](t*l+data.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,o){var data=P(e);n&&(o=(o=j(o))<0?0:o>255?255:255&o),data.view[y](t*l+data.byteOffset,o,!0)}(this,t,e)},enumerable:!0})};B?d&&(E=t((function(e,data,t,n){return m(e,E,c),x(M(data)?te(data)?void 0!==n?new _(data,w(t,l),n):void 0!==t?new _(data,w(t,l)):new _(data):J(data)?X(E,data):I.call(E,data):new _(T(data)),e,E)})),O&&O(E,H),S(A(_),(function(e){e in E||f(E,e,_[e])})),E.prototype=N):(E=t((function(e,data,t,n){m(e,E,c);var o,r,d,h=0,y=0;if(M(data)){if(!te(data))return J(data)?X(E,data):I.call(E,data);o=data,y=w(t,l);var f=data.byteLength;if(void 0===n){if(f%l)throw U(Q);if((r=f-y)<0)throw U(Q)}else if((r=v(n)*l)+y>f)throw U(Q);d=r/l}else d=T(data),o=new V(r=d*l);for(R(e,{buffer:o,byteOffset:y,byteLength:r,length:d,view:new F(o)});h<d;)k(e,h++)})),O&&O(E,H),N=E.prototype=C(G)),N.constructor!==E&&f(N,"constructor",E),W&&f(N,W,c),D[c]=E,o({global:!0,forced:E!=_,sham:!B},D),Z in E||f(E,Z,l),Z in N||f(N,Z,l),L(c)}):e.exports=function(){}},3109:function(e,t,n){var o=n(42),r=n(49),l=n(388),d=n(2863).NATIVE_ARRAY_BUFFER_VIEWS,c=o.ArrayBuffer,h=o.Int8Array;e.exports=!d||!r((function(){h(1)}))||!r((function(){new h(-1)}))||!l((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||r((function(){return 1!==new h(new c(2),1,void 0).length}))},3110:function(e,t,n){var o=n(158);e.exports=function(e){var t=o(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},3111:function(e,t,n){var o=n(115),r=n(62),l=n(252),d=n(387),c=n(63),h=n(2863).aTypedArrayConstructor;e.exports=function(source){var i,e,t,n,m,y,f=o(source),v=arguments.length,T=v>1?arguments[1]:void 0,w=void 0!==T,_=l(f);if(null!=_&&!d(_))for(y=(m=_.call(f)).next,f=[];!(n=y.call(m)).done;)f.push(n.value);for(w&&v>2&&(T=c(T,arguments[2],2)),e=r(f.length),t=new(h(this))(e),i=0;e>i;i++)t[i]=w?T(f[i],i):f[i];return t}},3136:function(e,t,n){"use strict";var o=n(2863),r=n(595),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",(function(e){return r.apply(l(this),arguments)}))},3137:function(e,t,n){"use strict";var o=n(2863),r=n(62),l=n(2983),d=n(115),c=n(49),h=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",(function(e){h(this);var t=l(arguments.length>1?arguments[1]:void 0,1),n=this.length,o=d(e),c=r(o.length),m=0;if(c+t>n)throw RangeError("Wrong length");for(;m<c;)this[t+m]=o[m++]}),c((function(){new Int8Array(1).set({})})))},3138:function(e,t,n){"use strict";var o=n(2863),r=o.aTypedArray,l=o.exportTypedArrayMethod,d=[].sort;l("sort",(function(e){return d.call(r(this),e)}))},3139:function(e,t,n){"use strict";var o=n(42),r=n(2863),l=n(49),d=o.Int8Array,c=r.aTypedArray,h=r.exportTypedArrayMethod,m=[].toLocaleString,y=[].slice,f=!!d&&l((function(){m.call(new d(1))}));h("toLocaleString",(function(){return m.apply(f?y.call(c(this)):c(this),arguments)}),l((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!l((function(){d.prototype.toLocaleString.call([1,2])})))},3294:function(e,t,n){n(3108)("Uint8",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},3385:function(e,t,n){"use strict";function o(e){var t,n,o,r,l,d;return 400===(null===(t=e.response)||void 0===t?void 0:t.status)&&("user_verification_needed"===(null===(o=null===(n=e.response)||void 0===n?void 0:n.data.error)||void 0===o?void 0:o.code)||"user_verification_needed"===(null===(r=e.response)||void 0===r?void 0:r.data.data)||"user_verification_needed"===(null===(d=null===(l=e.response)||void 0===l?void 0:l.data.error)||void 0===d?void 0:d.type))}function r(e){return{path:"/user_verification",query:{redirectPath:e}}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}))},4332:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(23);const r=Object(o.a)((e=>`/v3/notes/${e}/exclusion_settings`),(async(e,t,i,n)=>{if(!i)throw new Error("ExclusionSettings is required");await e.put(t,i,n)}))},4948:function(e,t,n){var content=n(6289);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("4b53a2a0",content,!0,{sourceMap:!1})},6288:function(e,t,n){"use strict";n(4948)},6289:function(e,t,n){var o=n(15)((function(i){return i[1]}));o.push([e.i,".o-noteListNotes__nav[data-v-765c3831]{padding-right:16px;padding-bottom:8px;padding-left:16px;border-bottom:1px solid var(--color-border-default)}@media only screen and (min-width:481px)and (max-width:768px){.o-noteListNotes__nav[data-v-765c3831]{padding-right:0;padding-left:0}}@media only screen and (max-width:480px){.o-noteListNotes__nav[data-v-765c3831]{padding-right:0;padding-left:0}}.o-noteListNotes__loading[data-v-765c3831]{padding:48px 0}@media only screen and (max-width:480px){.o-noteListNotes__loading[data-v-765c3831]{padding:32px 0}}.o-noteListNotes__loading[data-v-765c3831]:empty{padding:0}.o-noteListNotes__nocontents[data-v-765c3831]{display:flex;align-items:center;justify-content:center;height:400px;font-size:var(--font-size-sm);color:var(--color-text-secondary)}.o-noteListNotes__body[data-v-765c3831]{position:relative;z-index:6}",""]),o.locals={},e.exports=o},6863:function(e,t,n){"use strict";n.r(t);var o=n(0),r=(n(11),n(26),n(12),n(18),n(14),n(89),n(19),n(88),n(606),n(3294),n(3136),n(3137),n(3138),n(3139),n(67),n(55),n(29),n(1)),l=n(114),d=n.n(l),c=n(61),h=n(620),m=n(9),y=n(586),f=n(2965),v=n(3385),T=n(384),w=n(2860),_=n(193),E=n(54),N=n(138),M=n(2862),C=n(329),O=n(35),A=n(613),I=n(241),S=n(21),L=n.n(S),D=n(24),k=n(4332),z=r.a.extend({components:{EmptyContent:w.default,NtLoadingDots:N.a,NoteListFooter:()=>n.e(199).then(n.bind(null,6941)),NoteListItem:()=>n.e(201).then(n.bind(null,6942)),NoteListHeader:()=>n.e(200).then(n.bind(null,6943)),InfiniteScroll:M.a},mixins:[T.a,_.a,E.a],data(){return{status:this.$route.query.status,startDate:this.$route.query.from,endDate:this.$route.query.to,magazineId:this.$route.query.magazine_id,magazineKey:this.$route.query.magazine_key,toggledNotes:[],isLoading:!1,statusTitle:"",noContentStatusTitle:"",dateTitle:"",magazineTitle:"",noContentMagazineTitle:"",deleteTargets:[],moveTarget:null,isSaving:!1,canPublish:!1,isDownloading:!1}},computed:Object.assign(Object.assign(Object.assign(Object.assign({},Object(c.e)(C.moduleName,["owners"])),Object(c.c)("noteList",["notes","totalCount","pageCount","pageIndex","isLastPage","magazines","deleteLoading","editCompleted","dateRange","statuses","query"])),Object(c.c)({ownersCanWrite:C.OWNERS_GETTER_TYPES.GET_OWNERS_CAN_WRITE,ownersCanRead:C.OWNERS_GETTER_TYPES.GET_OWNERS_CAN_READ,ownersCanPublish:C.OWNERS_GETTER_TYPES.GET_OWNERS_CAN_PUBLISH,ownersCanAnalyse:C.OWNERS_GETTER_TYPES.GET_OWNERS_CAN_ANALYSE})),{shouldEmptyShown(){return!this.isLoading&&this.notes.length<1},hasCurrentUserNoteCount(){return this.currentUser.noteCount>0},noContentText(){return this.shouldEmptyShown&&this.hasCurrentUserNoteCount?this.noContentMagazineTitle?"".concat(this.noContentMagazineTitle," マガジンに記事はありません。"):this.noContentStatusTitle?"".concat(this.noContentStatusTitle,"はありません。"):"記事はありません。":"記事はありません。"},ownerUrlname(){return this.$route.params.urlname||void 0},isOwnerList(){return Boolean(this.$route.params.urlname)},writePermission(){return!this.isOwnerList||this.ownersCanWrite.some((e=>e.urlname===this.ownerUrlname))},readPermission(){return!this.isOwnerList||this.ownersCanRead.some((e=>e.urlname===this.ownerUrlname))},publishPermission(){return!this.isOwnerList||this.ownersCanPublish.some((e=>e.urlname===this.ownerUrlname))},analysePermission(){return!this.isOwnerList||this.ownersCanAnalyse.some((e=>e.urlname===this.ownerUrlname))},hasMemberships(){return this.$store.state.membershipList.membershipPermissions.length>0},ownerProUserKey(){var e,t;return null===(t=null===(e=this.owners)||void 0===e?void 0:e.find((e=>e.owner.urlname===this.ownerUrlname)))||void 0===t?void 0:t.proUserKey}}),watch:{$route(e){var t=this;return Object(o.a)((function*(){t.status=e.query.status,t.startDate=e.query.from,t.endDate=e.query.to,t.magazineId=e.query.magazine_id,t.magazineKey=e.query.magazine_key,t.setIsLoading(!0),yield t.loadContents(e.query.page),t.setIsLoading(!1)}))()},deleteLoading(e){var t=this;return Object(o.a)((function*(){e&&(yield t.deleteNotes(),t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.SET_DELETE_NOTE_LOADING,!1))}))()},editCompleted(e){var t=this;return Object(o.a)((function*(){e&&(yield t.loadContents(t.pageIndex),t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.SET_EDIT_NOTE_COMPLETED,!1))}))()},dateRange(e){this.changeCondition({startDate:e.startDate,endDate:e.endDate})}},created(){this.setTabTitle(),this.originalScrollBehavior=this.$router.options.scrollBehavior,this.$router.options.scrollBehavior=()=>({x:0,y:0}),this.setIsLoading(!0),this.owner?this.$store.dispatch(A.MEMBERSHIP_LIST_ACTION_TYPES.FETCH_OWNER_MEMBERSHIP_PERMISSIONS,{urlname:this.owner.urlname,noteKey:""}):this.$store.dispatch(A.MEMBERSHIP_LIST_ACTION_TYPES.FETCH_MEMBERSHIP_PERMISSIONS)},mounted(){var e=this;return Object(o.a)((function*(){var t;e.mountModals("dateSelect","deleteConfirm","draftNoteEditConfirm","moveAccount","noteEdit","r18ObjectionClaim","magazineList","membershipList"),e.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.SET_IS_OWNER_LIST,e.isOwnerList),e.$store.commit(y.MAGAZINE_LIST_MUTATION_TYPES.SET_NOTE_ADDED_TO_MAGAZINE,{noteId:null,location:""}),e.getArchives(),yield e.loadContents(null===(t=e.$route.query)||void 0===t?void 0:t.page),e.setIsLoading(!1),"downloadLeadResults"===e.$route.query.autoClick&&void 0!==e.$route.query.noteKey&&(yield e.downloadLeadResults(e.$route.query.noteKey))}))()},beforeDestroy(){this.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.CANCEL_NOTE_LIST),this.$router.options.scrollBehavior=this.originalScrollBehavior},methods:Object.assign(Object.assign({},Object(c.b)({setNote:m.NOTE_EDIT_ACTION_TYPES.SET_NOTE,showFlash:O.FLASH_MESSAGE_ACTION_TYPES.SHOW_FLASH})),{setIsLoading(e){this.isLoading=e},changeCondition(e){var t,n,o,r,l,d;if(!this.isLoading){e.hasOwnProperty("status")&&(this.status=e.status),e.hasOwnProperty("startDate")&&(this.startDate=e.startDate),e.hasOwnProperty("endDate")&&(this.endDate=e.endDate),e.hasOwnProperty("magazineId")&&(this.magazineId=e.magazineId),e.hasOwnProperty("magazineKey")&&(this.magazineKey=e.magazineKey);var c={page:null!==(t=e.page)&&void 0!==t?t:1,status:null!==(n=this.status)&&void 0!==n?n:void 0,from:null!==(o=this.startDate)&&void 0!==o?o:void 0,to:null!==(r=this.endDate)&&void 0!==r?r:void 0,magazine_id:null!==(l=this.magazineId)&&void 0!==l?l:void 0,magazine_key:null!==(d=this.magazineKey)&&void 0!==d?d:void 0};this.$router.push({path:this.$router.path,query:c})}},getArchives(){var e=this;return Object(o.a)((function*(){e.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.GET_ARCHIVES,{params:{urlname:e.ownerUrlname}})}))()},loadContents(){var e=arguments,t=this;return Object(o.a)((function*(){var n=e.length>0&&void 0!==e[0]?e[0]:1,o={page:n,status:t.status,from:t.startDate,to:t.endDate,magazine_id:t.magazineId,magazine_key:t.magazineKey,urlname:t.ownerUrlname};1===Number(n)&&(yield t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.INIT_NOTE_LIST)),yield t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.SET_QUERY,o),t.setTabTitle(),yield t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.GET_NOTE_LIST)}))()},setTabTitle(){if(this.statusTitle=this.statuses[this.query.status]||"公開ステータス",this.noContentStatusTitle=this.statuses[this.query.status],this.dateTitle=this.setDateTitle(),this.magazineTitle="マガジン",this.query.magazine_id){var e=this.magazines.find((e=>e.id===this.query.magazine_id));this.setMagazineTitle(e)}if(this.query.magazine_key){var t=this.magazines.find((e=>e.key===this.query.magazine_key));this.setMagazineTitle(t)}},setMagazineTitle(e){e&&(this.magazineTitle=e.name,this.noContentMagazineTitle=e.name)},setDateTitle(){var e;if(this.query.from&&this.query.to){var t=this.query.from.split("-"),n=new Date(t[0],t[1]-1,1),o=Object(f.b)(n,"YYYY-MM-DD"),r=this.query.to.split("-"),l=new Date(r[0],r[1],0),d=Object(f.b)(l,"YYYY-MM-DD");if(this.query.from===o&&this.query.to===d)e=Object(f.b)(n,"YYYY年M月");else{var c=Object(f.b)(this.query.from,"YYYY年M月D日"),h=Object(f.b)(this.query.to,"YYYY年M月D日");e=c===h?c:"".concat(c,"〜").concat(h)}}else e=this.query.from?"".concat(Object(f.b)(this.query.from,"YYYY年M月D日"),"以降"):this.query.to?"".concat(Object(f.b)(this.query.to,"YYYY年M月D日"),"以前"):"期間";return e},toggleNote(e,t){if(e)this.toggledNotes.length<20?this.toggledNotes.push(t):alert("一度に削除できるのは20件までです。");else{var n=this.toggledNotes.findIndex((e=>e.key===t.key));this.toggledNotes.splice(n,1)}this.$emit("changed-checked-notes",this.toggledNotes)},onMoveNote(e){this.moveTarget=e,this.openMoveAccountModal()},onPublish(e){if(!this.isSaving){location.href="".concat("https://editor.note.com","/notes/").concat(e.key,"/publish")}},onDeleteNote(e){this.deleteTargets=e,this.openDeleteConfirmModal()},onAddToMagazine(e){var t;(null===(t=this.currentUser)||void 0===t?void 0:t.emailConfirmedFlag)&&(this.pushMagazineListModal({note:e,location:"addToMagazine"}),this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"magazine-add-click",contents:{content_key:e.key,content_type:"Note",route_name:this.$route.name}})]))},deleteNotes(){var e=this;return Object(o.a)((function*(){var t=[];for(var n of e.deleteTargets)t.push(e.deleteNote(n));var o=e.deleteTargets.length,r=e.$refs.listItem.length;try{if(yield Promise.all(t),e.pageIndex>1&&e.isLastPage&&r===o)return void e.changeCondition({page:e.pageIndex-1});window.location.reload()}catch(e){alert("削除に失敗しました。時間を空けて再度お試しください。")}}))()},deleteNote(e){var t=this;return Object(o.a)((function*(){yield t.$store.dispatch(m.NOTE_EDIT_ACTION_TYPES.DELETE_NOTE,e);var n=t.toggledNotes.findIndex((t=>t.key===e.key));t.toggledNotes.splice(n,1)}))()},toggledNotesIncludes(e){return this.toggledNotes.some((t=>t.key===e.key))},clearAllChecks(){this.toggledNotes=[]},clickCallback(e){this.changeCondition({page:e})},editNote(e,t){var n;if(null===(n=this.currentUser)||void 0===n?void 0:n.emailConfirmedFlag)if("TextNote"!==e)this.pushNoteEditModal({noteType:e,props:{note:t}});else if(t.noteDraft&&["published","reserved"].includes(t.status))this.pushDraftNoteEditConfirmModal({note:t,noteDraft:t.noteDraft});else{var path=this.$path.noteEditPath(t.key);path.startsWith("http")?location.href=path:this.$router.push(path)}else this.pushRequestEmailConfirmModal()},openDeleteConfirmModal(){this.pushDeleteConfirmModal({object:1===this.deleteTargets.length?this.deleteTargets[0]:null,type:"note",name:"記事",itemCount:this.deleteTargets.length})},openMoveAccountModal(){this.pushMoveAccountModal({note:this.moveTarget})},duplicateNote(e){var t=this;return Object(o.a)((function*(){t.$tracker.trackActionLogs([t.$tracker.buildActionLogRecord({kind:"duplicate-note-button-click",contents:{place:"note-list-duplicate-note-button",target_id:e.id,target_type:"Note",source_id:t.currentUser.id,source_type:"User"}})]);var n=yield Object(I.a)(t.$axios,e.key);location.href="".concat(t.$path.currentNoteBaseUrl,"/notes/").concat(n.data.noteKey,"/edit")}))()},openBackToDraftModal(e){var t,{enableBacktoDraft:n}=e;t=n?e.hasDraft?"hasDraft":"comfirmBacktoDraft":this.currentUser.isPro?"unableBacktoDraftForProUser":"unableBacktoDraft",this.pushBasicMessageModal({actionType:t,submitCallback:n?this.backToDraft.bind(null,e):null,disableBackdrop:!0})},backToDraft(e){var t=this;return Object(o.a)((function*(){try{yield t.$axios.post("/v2/notes/".concat(e.key,"/change_status"),{status:"draft"});t.replaceAnyMessageModal({message:"下書きに戻りました。",closeCallback:()=>window.location.reload()})}catch(e){var n=t.toApiErrorMessage(e.response);t.replaceAnyMessageModal({message:n})}}))()},onR18ObjectionClaim(e){this.pushObjectionClaimModal({contentType:"Note",contentId:e.id})},infiniteHandler(e){var t=this;return Object(o.a)((function*(){t.isLastPage?e.complete():(t.setIsLoading(!0),yield t.loadContents(t.pageIndex+1||1),t.setIsLoading(!1),e.loaded())}))()},onAddToMembership(e){var t;(null===(t=this.currentUser)||void 0===t?void 0:t.emailConfirmedFlag)&&this.pushMembershipListModal({note:e,owner:this.owner})},downloadLeadResults(e){var t=this;return Object(o.a)((function*(){var n;if(!t.isDownloading){t.isDownloading=!0;try{var title=null===(n=t.notes.find((t=>t.key===e)))||void 0===n?void 0:n.name,o=yield t.$axios.$get("/v3/lead_results/csv_download?note_key=".concat(e)),r="".concat(d()(new Date,"YYYYMMDD"),"_").concat(title,"_メールアドレス一覧.csv"),l=new Uint8Array([239,187,191]),c=new Blob([l,o],{type:"text/csv"}),link=document.createElement("a");link.href=window.URL.createObjectURL(c),link.download=r,link.click(),t.showFlash({text:"メールアドレス一覧をダウンロードしました。",type:"success"})}catch(n){Object(v.b)(n)?t.$router.replace(Object(v.a)("/notes?autoClick=downloadLeadResults&noteKey=".concat(e))):t.showFlash({text:n.response.data.error.message,type:"error"})}finally{t.isDownloading=!1}}}))()},handleToggleExcludeFromCreatorTop(e){var t=this;return Object(o.a)((function*(){try{var n=!e.excludeFromCreatorTop;yield k.a.call(L.a,[e.key],{target:"CreatorTop",exclude:n},Object(D.a)(t)),yield t.$store.dispatch(h.NOTE_LIST_ACTION_TYPES.TOGGLE_EXCLUDE_FROM_CREATOR_TOP,{note:e,value:n})}catch(e){t.showFlash({text:"クリエイターページの表示設定の変更に失敗しました",type:"error"})}}))()}})}),x=z,P=(n(6288),n(7)),component=Object(P.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"o-noteListNotes__main"},[n("header",{staticClass:"o-noteListNotes__nav"},[n("note-list-header",{attrs:{"total-count":e.totalCount,magazines:e.magazines,"status-title":e.statusTitle,"date-title":e.dateTitle,"magazine-title":e.magazineTitle},on:{"change-condition":function(t){return e.changeCondition(t)},"open-date-select-modal":function(t){return e.pushDateSelectModal({startDate:e.startDate,endDate:e.endDate})}}})],1),e._v(" "),e.isLoading&&0===e.notes.length?n("div",{staticClass:"o-noteListNotes__loading"},[n("nt-loading-dots")],1):e._e(),e._v(" "),n("ul",{staticClass:"o-noteListNotes__body"},[e.shouldEmptyShown&&!e.hasCurrentUserNoteCount?n("empty-content",{attrs:{"empty-type":"myHome"}}):e._e(),e._v(" "),e.shouldEmptyShown&&e.hasCurrentUserNoteCount?n("li",{staticClass:"o-noteListNotes__nocontents"},[e._v("\n        "+e._s(e.noContentText)+"\n      ")]):e._e(),e._v(" "),e._l(e.notes,(function(t,i){return n("li",{key:i},[n("note-list-item",{ref:"listItem",refInFor:!0,attrs:{index:i,note:t,checked:e.toggledNotesIncludes(t),"write-permission":e.writePermission,"read-permission":e.readPermission,"publish-permission":e.publishPermission,"analyse-permission":e.analysePermission,"owners-can-write":e.ownersCanWrite,"is-owner-list":e.isOwnerList,"is-saving":e.isSaving,"has-memberships":e.hasMemberships,"owner-pro-user-key":e.ownerProUserKey,"is-downloading":e.isDownloading},on:{"change-condition":function(t){return e.changeCondition(t)},"edit-note":function(n){return e.editNote(t.type,t)},"toggle-note":function(n){return e.toggleNote(n,t)},duplication:function(n){return e.duplicateNote(t)},"back-to-draft":function(n){return e.openBackToDraftModal(t)},"get-preview-link":function(n){return e.getPreviewLink(t)},"move-note":function(n){return e.onMoveNote(t)},"delete-note":function(n){return e.onDeleteNote([t])},"r18-objection-claim":function(n){return e.onR18ObjectionClaim(t)},publish:e.onPublish,"add-to-magazine":function(n){return e.onAddToMagazine(t)},"add-to-membership":function(n){return e.onAddToMembership(t)},"download-lead-results":function(n){return e.downloadLeadResults(t.key)},"toggle-exclude-from-creator-top":e.handleToggleExcludeFromCreatorTop}})],1)}))],2),e._v(" "),e.notes.length>0?n("infinite-scroll",{staticClass:"o-noteListNotes__loading",on:{infinite:e.infiniteHandler}},[n("nt-loading-dots",{attrs:{slot:"loading"},slot:"loading"})],1):e._e()],1),e._v(" "),n("div",{staticClass:"o-noteList__action"},[n("note-list-footer",{attrs:{notes:e.toggledNotes},on:{"clear-all-checks":e.clearAllChecks,"delete-notes":function(t){return e.onDeleteNote(e.toggledNotes)}}})],1)])}),[],!1,null,"765c3831",null);t.default=component.exports}}]);